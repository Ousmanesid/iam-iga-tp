<?xml version="1.0" encoding="UTF-8"?>
<!--
  Role: Home App User
  Rôle de base pour tous les utilisateurs de Home App
  
  Ce rôle provisionne automatiquement un compte dans Home App PostgreSQL
  et assigne le rôle USER par défaut.
-->
<role oid="00000000-0000-0000-0000-000000000101"
      xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
      xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
      xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
      xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3">

    <name>Home App User</name>
    <description>Rôle de base pour l'accès à Home App - Provisionne un compte utilisateur dans PostgreSQL</description>
    
    <displayName>Utilisateur Home App</displayName>
    
    <requestable>true</requestable>
    <riskLevel>low</riskLevel>

    <!-- Inducement: création du compte dans Home App PostgreSQL -->
    <inducement>
        <construction>
            <resourceRef oid="8a83b1a4-be18-11e6-ae84-7301fdab1d7f" type="ResourceType">
                <!-- Home App PostgreSQL -->
            </resourceRef>
            <kind>account</kind>
            <intent>default</intent>
        </construction>
    </inducement>

    <!-- Condition d'auto-assignation ABAC (optionnel) -->
    <!-- Ce rôle peut être auto-assigné à tous les employés actifs -->
    <autoassign>
        <enabled>true</enabled>
        <focus>
            <selector>
                <type>UserType</type>
            </selector>
        </focus>
    </autoassign>

</role>

